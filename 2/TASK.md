CAP Task

Я почитал ссылки, которые предлагались в материалах к курсу (https://habr.com/post/136305/ и https://habr.com/post/136398/), и пришел к выводу, что у меня будет что-то похожее на CP систему (то есть чтение доступно всегда тогда, когда хотя бы есть один узел в строю, а для записи такой гарантии нету). То есть CP позволяет получать целостный результат и может функционировать в случае распада, но это достигается в ущерб доступности: может быть такое, что на запрос не будет никакого отклика.

Описанная мной система доступна для любого пользователя и каждый может создать или удалять футболиста и изменять данные о футболисте. Тогда появляются проблемы, когда несколько человек одновременно пытаются что-то сделать с одной записью в базе. Может быть несколько вариантов: это пользователи пытаются изменять какую-то информация одновременно, или кто-то один из них пытается изменить информацию, а второй пытается удалить одну из записей в базе данных. В первом случае (когда оба пытаются что-то изменить), правки будут применяться в том порядке, в котором они и были сделаны по очереди. Во втором случае может быть два варианта: сначала произведено изменение а потом удаление, или наоборот. В первом случае никаких проблем не наблюдается, а во втором получается, что пользователь хочет изменить информацию уже у удаленной записи. В таком случае будем ему выдавать сообщение о ошибке, что такая запись не найдена. 

Также в моей реализации не важно, когда пришли какие-то изменения для различных записей, главное их не потерять и применить, иначе это будет не CP. 

В реализации всего этого будем использовать MongoDB. Почему:

1) С точки зрения MongoDB, преимуществом является то, что здесь гибкий JSON-формат данных. Это кажется поприятнее, чем, например,  возиться в добавлением или удалением колонок в SQL-базах данных. Простые запросы (как в моей задаче) меньше вызывают в таком случае проблемы. И обычно проблемы с производительностью появляются тогда, когда происходят какие-нибудь JOIN или GROUP BY, а если и такой функциональности, к примеру, нет, то появляются проблемы с заданием сложных запросов. То есть, в сравнении с SQL-базами данных, MongoDB хорошо взаимодествует с JSON и это большой плюс. 

2) С использование MongoDB получается более быстрая разработка, потому что в жизни в проекте все может быстро меняться и не нужно все время заботиться о том, чтобы информация хранилась в строгом формате.

3) Есть понятие репликации, в MongoDB она встроена. У нас запросы такие, что пользователю нужно уметь и читать и писать (пользователь должен ходить всегда в мастера). Так как у нас CР система, то она иногда может быть недоступной для записи и никакой проблемы с изменением мастера не наблюдается.
