# Описание API

### Краткое описание примера 

Я буду рассматривать на примере футбольной команды. У меня будет футбольная команда, которая состоит из игроков. Каждый игрок имеет ФИО и свою трансферную цену. Тогда будут запросы: получить информацию о игроке, изменить трансферную стоимость в млн евро, удалить игрока (трансфер/аренда/свободный агент), добавить нового игрока и получить полный состав команды.

### Как будет храниться информация

| Data type | Data format | Description | Variable |
| ------ | ------ | ------ | ------ |
| int | uint32 | ID | id |
| string | unicode | ФИО | name |
| int | uint32 | Трансферная стоимость | cost |

Здесь ID у всех событий должен быть уникальным. 

### Пример игрока

```json
{
  "player": {    
    "name": "Артём Дзюба",
    "cost": 10
  }
}
```

### Описание возможных запросов

| Query type | URI | Description |
| ------ | ------ | ------ |
|  PATCH | /player/[id] Изменить трансферную стоимость игрока |
|  GET | /player/[id] | Получить информацию о трансферной стоимости игрока |
|  DELETE | /player/[id] | Удалить игрока |
|  POST | /players | Добавить нового игрока. Ожидается, что будут переданы поля name и cost |
| GET | /players | Получить информацию о всех игроках |
  
  URI будет получено из hypermedia.

# Описание API и каждого возможного запроса отдельно 

### 1. /player/<id> запросы

Во всех запросах ниже /player/<id> - URI события (возвращается при создании события, т.е. когда происходит POST запрос в /player).

#### 1.a) Получить информацию о трансферной стоимости (GET)

Возможные ответы:

| Value | Code | Description |
| ------ | ------ | ------ |
|  OK | 200 | Корректный запрос, в результате вернется JSON с описанием игрока |
|  Not found | 404 | Нету игрока с указанным URI |

Пример JSON:


```json
{
  "player": {
    "links": {
      "self": "/player/1"
    }
    "name": "Федор Смолов",
    "cost": 10
  }
}
```

#### 1.b) Удалить игрока (DELETE)

Возможные ответы:

| Value | Code | Description |
| ------ | ------ | ------ |
|  OK | 200 | Корректный запрос, такого футболиста больше нету |
|  Not found | 404 | Не найден игрок с заданным URI |

#### 1.c) Изменить трансферную стоимость у игрока (PATCH)

Будет изменяться трансферная стоимость у указанного игрока. Ожидается, что будет передаваться JSON, который содержит новое значение трансферной стоимости.

В запросе необходимо передать JSON с параметром <cost> - новая стоимость игрока. Например,

```json
{
    "cost": ["New cost as <int>"]
}
```

Возможные ответы:

| Value | Code | Description |
| ------ | ------ | ------ |
|  OK | 200 | Корректный запрос, трансферная стоимость была изменена |
|  Bad requst | 400 | Неверный формат передаваемых атрибутов |
|  Not found | 404 | Не найден футболист с указанным URI |

### 2. /players запросы

Здесь будут описаны запросы, которые можно сделать к ручке /players

#### 2.a) Получить информацию о всех игроках (GET)

Результатом будет являться информация о составе всей команды в формате JSON.

```json
{    
    "players": [
        "player": {
          "links": {
            self: "/player/1"
          },
          "name": "Артём Дзюба",
          "cost": 10
        }
        "player": {
          "links": {
            self: "/player/2"
          },
          "name": "Федор Смолов",
          "cost": 15
        },
        ...
    ]
}
```

#### 2.b) Добавить нового игрока (POST)

Добавить нового футболиста.

Проводиться проверка форматов для всех полей. При несоответствии форматов параметров футболист не будет добавлен и будет возвращен соответствующий HTTP код.

Ожидается JSON, который будет описывать поля для нового футболиста.

Возможные ответы:

| Value | Code | Description |
| ------ | ------ | ------ |
|  Created | 201 | Корректный запрос, будет возвращен JSON, который будет описывать нового игрока |
|  Bad request | 400 | Некорректный запрос или список передаваемых параметров |

Пример ответа при 201:

```json
{
  "player": {
    "links": {
      "self": "/player/1"
    }
    "name": "Федор Смолов",
    "cost": 10
  }
}
```

